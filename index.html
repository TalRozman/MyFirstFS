<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        body{
            background-color: bisque;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif
        }
        button{
            background-color: aquamarine;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-size: large;
        }
    </style>

</head>
<body>
    description: <input id="desc"><br>
    category: <input id="cat"><br>
    price: <input id="price"><br>
    <button onclick="addData()">Add Product</button><br>
    
    <div id="display"></div>


    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>

    <script>
        const MY_SERVER = "http://localhost:3000/products/"

        const loadData = async() =>{
            const res = await axios.get(MY_SERVER)
            display.innerHTML = res.data.map(product => `<h1> <button onclick="delData(${product.id})">Delete Row</button> <button onclick="updData(${product.id})">Update Row</button><br> ID: ${product.id}<br> Description: ${product.description}<br>Category: ${product.catagory}<br> Price: ${product.price}</h1><hr>`).join("")
        }
        loadData()

        const addData=() => {
        axios.post(MY_SERVER,{description:desc.value, catagory:cat.value, price: price.value})
        }

        const delData=(id) =>{
            axios.delete(MY_SERVER+id).then((res) => display.innerHTML = `<h1>product deleted</h1>`)
        }

        const updData = async(id) =>
        {
            await axios.put(MY_SERVER+id,{description:desc.value, catagory:cat.value, price: price.value})
        }
    </script>
</body>
</html>
